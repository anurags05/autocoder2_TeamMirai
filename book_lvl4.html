<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Page Flip Storybook</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #111010;
            font-family: 'Georgia', serif;
            position: relative;
            margin: 0;
            padding: 0;
        }

        /* Add background image container */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.5;
        }

        .background-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .book {
            position: relative;
            width: 400px;
            height: 500px;
            perspective: 1500px;
            transform-style: preserve-3d;
            z-index: 1;
        }

        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-origin: left center;
            transform-style: preserve-3d;
            transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
            cursor: pointer;
        }

        .page-front, .page-back {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: #1a1a2e;
            color: #e1e1ff;
            padding: 30px;
            box-sizing: border-box;
            backface-visibility: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 0 5px 5px 0;
            overflow: hidden;
            /* border: 2px solid #beff9b */
        }

        .page-back {
            transform: rotateY(180deg);
            background: #1a1a2e;
        }

        .page.flipped {
            transform: rotateY(-180deg);
        }

        .page-content {
            max-width: 90%;
            margin: 0 auto;
            line-height: 1.6;
            font-size: 18px;
        }

        .page-number {
            position: absolute;
            bottom: 20px;
            font-size: 14px;
            color: #666;
        }

        .page-front .page-number {
            right: 30px;
        }

        .page-back .page-number {
            left: 30px;
        }

        .page:nth-child(1) { z-index: 2; }
        .page:nth-child(2) { z-index: 1; }

        .page-fold {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right,
                rgba(0,0,0,0) 0%,
                rgba(0,0,0,0.1) 50%,
                rgba(0,0,0,0) 100%);
            opacity: 0;
            transition: opacity 1.2s;
            pointer-events: none;
        }

        .page.turning .page-fold {
            opacity: 1;
            transition: opacity 0.6s;
        }

        .book::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 20px;
            height: 100%;
            background: #333;
            transform: translateX(-10px) rotateY(-90deg);
            transform-origin: right;
        }

        h1 {
            color: #76edf3;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .page {
            transition-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .page.turning {
            animation: turnPage 1.2s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
        }

        @keyframes turnPage {
            0% { transform: rotateY(0); }
            100% { transform: rotateY(-180deg); }
        }

        .page.returning {
            animation: returnPage 1.2s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
        }

        @keyframes returnPage {
            0% { transform: rotateY(-180deg); }
            100% { transform: rotateY(0); }
        }
    </style>
</head>
<body>
    <!-- Add background image container -->
    <div class="background-container">
        <img src="images/image.webp" alt="Background">
    </div>

    <div class="book">
        <!-- Rest of the book content remains the same -->
        <div class="page">
            <div class="page-front">
                <div class="page-content">
                    <h1>Epilogue</h1>
                    <p>With the Zorak Dominion dealt a devastating blow, peace is restored to Terra Nova, but the victory is bittersweet. The battle had cost the Guardians dearly, losing comrades in the struggle and forever altering the course of their lives.</p>
                    <center><img src="images/level4.2.jpg" alt="" style="height: 150px;"></center>
                    <div class="page-number">1</div>
                </div>
            </div>
            <div class="page-back">
                <div class="page-content">
                    <p>The ancient artifact, now safely stored in the hands of the Galactic Federation, is studied by scientists, its secrets slowly unraveling. Its true power, however, remains a mystery.The Galactic Guardians are celebrated as heroes, their names etched in history.</p>
                    <center><img src="images/level4.jpg" alt="" style="height: 180px;"></center>
                    <div class="page-number">2</div>
                </div>
            </div>
            <div class="page-fold"></div>
        </div>
        <div class="page">
            <div class="page-front">
                <div class="page-content">
                    <p>Monuments are built in their honor, and their deeds are taught to future generations as a testament to courage and unity. Captain Aiden Storm, Lieutenant Maya Orion, Sergeant Kael Draven, and Engineer Luna Vega, though revered, continue to stand watch over the galaxy, ever vigilant. They know that while the Zorak are defeated, there are always new threats lurking in the shadows, waiting to challenge the peace theyâ€™ve fought so hard to secure.</p>
                    <div class="page-number">3</div>
                </div>
            </div>
            <div class="page-back">
                <div class="page-content">
                    <p>Finished.</p>
                    <img src="images/epilogue .jpg" alt="" style="height: 320px;">
                    <div class="page-number">4</div>
                </div>
            </div>
            <div class="page-fold"></div>
        </div>
        <!-- <div class="page">
            <div class="page-front">
                <div class="page-content">
                    <p>With the combined strength and determination of the Galactic Guardians, the Zorak Supreme Commander is defeated, and the artifact is safeguarded.</p>
                    <div class="page-number">5</div>
                </div>
            </div>
            <div class="page-back">
                <div class="page-content">
                    <p>Objective: Investigate a mysterious signal in the Dark Nebula and rescue stranded allies.
                        <br>Start Level 3: <a href="www.google.com">google.com</a>
                    </p>
                    <div class="page-number">6</div>
                </div>
            </div>
            <div class="page-fold"></div>
        </div> -->
    </div>

    <script>
        const pages = document.querySelectorAll('.page');
        let currentIndex = 0;
        let isAnimating = false;

        function updateZIndex() {
            pages.forEach((page, index) => {
                if (index < currentIndex) {
                    page.style.zIndex = index;
                } else {
                    page.style.zIndex = pages.length - (index - currentIndex);
                }
            });
        }

        function flipPage(event) {
            if (isAnimating) return;

            const page = event.target.closest('.page');
            if (!page) return;

            isAnimating = true;
            const pageIndex = Array.from(pages).indexOf(page);
            
            page.classList.add('turning');
            
            if (pageIndex < currentIndex) {
                currentIndex--;
                page.classList.add('returning');
                page.classList.remove('flipped');
            } else {
                currentIndex++;
                page.classList.remove('returning');
                page.classList.add('flipped');
            }

            setTimeout(() => {
                page.classList.remove('turning');
                page.classList.remove('returning');
                isAnimating = false;
                updateZIndex();
            }, 1200);
        }

        pages.forEach(page => {
            page.addEventListener('click', flipPage);
        });

        // Add keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' && currentIndex < pages.length) {
                pages[currentIndex].click();
            } else if (e.key === 'ArrowLeft' && currentIndex > 0) {
                pages[currentIndex - 1].click();
            }
        });
    </script>
</body>
</html>